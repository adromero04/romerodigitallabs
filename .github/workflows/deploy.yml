name: Deploy to Hostinger (SFTP)

on:
  push:
    branches: ["main"]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      # -----------------------------
      # If you have a build step (React/Vite/etc), UNCOMMENT this section
      # and set the upload "localDir" to your build output (usually dist)
      # -----------------------------
      # - name: Setup Node
      #   uses: actions/setup-node@v4
      #   with:
      #     node-version: "20"
      #
      # - name: Install deps
      #   run: npm ci
      #
      # - name: Build
      #   run: npm run build

      - name: Upload via SFTP
        uses: pressidium/lftp-mirror-action@v1
        with:
          host: ${{ secrets.SFTP_HOST }}
          port: ${{ secrets.SFTP_PORT }}
          user: ${{ secrets.SFTP_USER }}
          pass: ${{ secrets.SFTP_PASS }}
          remoteDir: ${{ secrets.SFTP_REMOTE_PATH }}
          # For a plain HTML site (repo contains the deploy-ready files), keep "."
          # For React/Vite, change "." to "dist" after enabling the build steps above.
          localDir: "."
          # Avoid uploading git + workflow files
          ignoreFile: ".lftpignore"
